{"version":3,"sources":["angular-dropbox.js"],"names":["angular","dropularConfigProvider","DEFAULT_CONFIGURATION","getConfig","provider","options","$log","setConfig","configuration","arguments","length","undefined","tokenProvided","isObject","isUndefined","error","isDefined","accessToken","isString","clientId","extend","debug","this","config","service","$dropularConfig","dropbox","init","callback","factory","Dropbox","dropularAuthButtonDirective","upload","directive","link","scope","elem","delay","$inject","$timeout","restrict","module","dropularFactory","constant","selectUser"],"mappings":"cAaA,SACWA,GAST,QAASC,GAAwBC,GAkBhC,QAASC,KAAT,MAAAC,GAASD,QASDC,EAASC,SAPhBC,EAAMF,MAASC,+BAGP,GAaT,QAASE,KAAgC,GAAAC,GAAAC,UAAAC,OAAA,OAAAC,KAAAF,UAAA,GAAAA,UAAA,MAEpCG,GAAgB,CAIpB,QAAMZ,EAAQa,SAAUL,IAAmBR,EAAQc,YAAaN,OAE/DF,GAAKS,MAAO,qCAKbH,EAAgBZ,EAAQgB,UAAWR,EAAcS,cAAiBjB,EAAQkB,SAAUV,EAAcS,aAC/EjB,EAAQgB,UAAWR,EAAcW,WAAcnB,EAAQkB,SAAUV,EAAcW,WAEtEP,GAO5BR,EAASC,QAAUL,EAAQoB,OAAQf,EAASG,IAEV,KAA3BJ,EAASC,QAAQgB,OAGxBf,EAAOF,MAAAA,wBAAPA,EAAAC,SAAOD,EAASC,aAVfC,GAAKS,MAAO,4EAtDf,GAAAT,GAASL,EAAAA,UAAwBC,OAAAA,IAAAA,QAK5BE,EAAWkB,IADflB,GAAAC,WACAD,EAAIA,OAAJG,EACAH,EAASC,UAATE,EACAH,EAASmB,UAAShB,CAKlB,IAAIF,GAAUH,CAsEd,OAPCsB,GAAQjB,KAAAA,WADR,GAAIiB,KAQL,OAJCA,GAAOA,UAAPjB,EANDiB,EAAArB,UAAAA,EAUOC,GAAAA,EA6BuC,QAA/BI,GAA+BF,EAV9CmB,GAYC,QACGC,MAUF,QAAAC,KAAA,GAAAnB,GAAAC,UAAAC,OAAA,OAAAC,KAAAF,UAAA,GAAAA,UAAA,MAAAmB,EAAAnB,UAAA,GAEDJ,EAAAoB,EAAAlB,UAAAC,GAEAkB,MAAAA,EAFA,OAKDG,KAZEH,EAAU,GAAII,SAASzB,GAiBzB,kBAAAuB,IAdGA,EAAUF,IAILA,EAIR,GAAIG,KAIJ,OAkBDA,GAASE,KAAAA,EApBRF,EAAQG,OAASA,EAEVH,EA0CNZ,QAAAA,GACAE,EACAE,GAGDY,QAAUC,GAAVC,EAAAC,GAEA,GAAAC,GAAOJ,EAAPI,MAAAF,EAAAE,MAAA,EAEA7B,GAxBGS,YAAakB,EAAMlB,YAAckB,EAAMlB,YAAc,GA0BzDc,SAAAA,EAAAA,SACEO,EAAUnB,SAEV,GA3BEE,QAAOc,EAAMd,OAAQc,EAAMd,MA4C5BA,OAFAF,GAAAA,MAAUR,EAFX0B,GAIQE,EAAA,WAAA,MAAAH,IAAAC,GAlCT,GAAIJ,KAUJ,OATAA,GAAUO,SAAW,IACrBP,EAAUE,OACTlB,YAAa,uBACbE,SAAU,oBACVE,MAAO,iBACPgB,MAAO,kBAERJ,EAAUC,KAAOA,EAEVD,EAjGRhC,EACEqC,SACA,yBA0EEnB,EACAE,SAJF,OAlBA,mBA8CFU,EACEO,SACA,OACA,YAMFtC,EACEyC,OAAQ,eACRrC,SAAU,kBAAmBH,GAC7B4B,QAAS,WAAYa,GACrBT,UAAW,qBAAsBF,GACjCY,SACA,yBAEC1B,YAAa,GACbE,aAAUR,GACViC,eAAYjC,GACZU,OAAO,KAMTrB","file":"angular-dropbox.min.js","sourcesContent":["/*\n*  Dropbox Wrapper for AngularJs @dropular\n*  API @ https://luxdamore.github.io/angular-dropbox/\n*\n*  Dropular is a service that permit to comunicate with the new Dropbox API.\n*  Manteined by @studiomado @luxdamore\n*\n*  Dropbox links\n*      - App creation: https://www.dropbox.com/developers/apps/create\n*      - Api explorer: https://dropbox.github.io/dropbox-api-v2-explorer/\n*\n*/\n\n(\n\tfunction( angular ) {\n\n\t\t'use strict';\n\n\t\t/**\n\t\t* @function dropularConfigProvider\n\t\t* @param   {angularConst} DEFAULT_CONFIGURATION { Only used for the default options of the plugin }\n\t\t* @return {angularProvider} { Provider }\n\t\t*/\n\t\tfunction dropularConfigProvider( DEFAULT_CONFIGURATION ) {\n\n\t\t\tconst $log = angular.injector( [ 'ng' ] ).get( '$log' );\n\n\t\t\t// Provider\n\t\t\tlet provider = this;\n\t\t\tprovider.options = {};\n\t\t\tprovider.config = setConfig;\n\t\t\tprovider.setConfig = setConfig;\n\t\t\tprovider.getConfig = getConfig;\n\n\t\t\t// Default options\n\t\t\tlet options = DEFAULT_CONFIGURATION;\n\n\t\t\t/**\n\t\t\t* @function getConfig\n\t\t\t* @return {object} { Actual configuration }\n\t\t\t*/\n\t\t\tfunction getConfig() {\n\n\t\t\t\tif( ! provider.options ) {\n\n\t\t\t\t\t$log.error( 'No configuration provided.' );\n\t\t\t\t\treturn false;\n\n\t\t\t\t};\n\n\t\t\t\treturn provider.options;\n\n\t\t\t};\n\n\t\t\t/**\n\t\t\t* @function setConfig\n\t\t\t* @param  {object} configuration { The configuration for Dropbox Developer }\n\t\t\t* @return {object} { The configuration actually used }\n\t\t\t*/\n\t\t\tfunction setConfig( configuration = {} ) {\n\n\t\t\t\tlet tokenProvided = true\n\t\t\t\t\t, clientIdProvided = true\n\t\t\t\t;\n\n\t\t\t\tif( ! angular.isObject( configuration ) || angular.isUndefined( configuration ) ) {\n\n\t\t\t\t\t$log.error( 'Configuration must be an object.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t};\n\n\t\t\t\ttokenProvided = angular.isDefined( configuration.accessToken ) && angular.isString( configuration.accessToken );\n\t\t\t\tclientIdProvided = angular.isDefined( configuration.clientId ) && angular.isString( configuration.clientId );\n\n\t\t\t\tif( ! clientIdProvided && ! tokenProvided ) {\n\n\t\t\t\t\t$log.error( 'accessToken or clienId must be provided and must be a non-empty string.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t};\n\n\t\t\t\tprovider.options = angular.extend( options, configuration );\n\n\t\t\t\tif( !! provider.options.debug === true )\n\t\t\t\t\t$log.debug( 'Configuration changed', provider.options );\n\n\t\t\t\treturn provider.options;\n\n\t\t\t};\n\n\t\t\t/**\n\t\t\t* @function $get\n\t\t\t* @return {angularService} { The services for this Provider }\n\t\t\t*/\n\t\t\tprovider.$get = () => {\n\n\t\t\t\tlet service = {};\n\t\t\t\tservice.setConfig = setConfig;\n\t\t\t\tservice.getConfig = getConfig;\n\n\t\t\t\treturn service;\n\n\t\t\t};\n\n\t\t\treturn provider;\n\n\t\t};\n\n\t\tdropularConfigProvider\n\t\t\t.$inject = [\n\t\t\t\t'DEFAULT_CONFIGURATION',\n\t\t\t]\n\t\t;\n\n\n\t\t/**\n\t\t* @function dropularFactory\n\t\t* @param  {angularService} $log { Only used for debugging purpose }\n\t\t* @param  {dropularConfig} $location { Configuration of the Plugin }\n\t\t* @return {angularFactory} { Factory }\n\t\t*/\n\t\tfunction dropularFactory(\n\t\t\t$log,\n\t\t\t$dropularConfig\n\t\t) {\n\n\t\t\tfunction upload() {};\n\n\t\t\t/**\n\t\t\t* @function init\n\t\t\t* @param  {object} configuration { The configuration for Dropbox Developer }\n\t\t\t* @return {function} callback { Callback function }\n\t\t\t*/\n\t\t\tfunction init( configuration = {}, callback ) {\n\n\t\t\t\tlet options = $dropularConfig.setConfig( configuration )\n\t\t\t\t\t, dropbox\n\t\t\t\t;\n\n\t\t\t\tif( options ) {\n\n\t\t\t\t\tdropbox = new Dropbox( options );\n\n\t\t\t\t\tif( typeof callback === 'function' )\n\t\t\t\t\t\tcallback( dropbox );\n\n\t\t\t\t};\n\n\t\t\t\treturn dropbox;\n\n\t\t\t};\n\n\t\t\tlet factory = {};\n\t\t\tfactory.init = init;\n\t\t\tfactory.upload = upload;\n\n\t\t\treturn factory;\n\n\t\t};\n\n\t\tdropularFactory\n\t\t\t.$inject = [\n\t\t\t\t'$log',\n\t\t\t\t'$dropularConfig'\n\t\t\t]\n\t\t;\n\n\n\t\t/**\n\t\t* @function dropularAuthButtonDirective\n\t\t* @param  {angularProvider} $log { Only used for debugging purpose }\n\t\t* @param  {angularProvider} $timeout { Used for Delayed statup }\n\t\t* @return {angularDirective} { Directive }\n\t\t*/\n\t\tfunction dropularAuthButtonDirective(\n\t\t\t$log,\n\t\t\t$timeout\n\t\t) {\n\n\t\t\tfunction link( scope, elem ) {\n\n\t\t\t\tlet delay = scope.delay ? scope.delay : 0\n\t\t\t\t\t, configuration = {\n\t\t\t\t\t\taccessToken: scope.accessToken ? scope.accessToken : '',\n\t\t\t\t\t\tclientId: scope.clientId ? scope.clientId : '',\n\t\t\t\t\t\tdebug: scope.debug ? scope.debug : false,\n\t\t\t\t\t}\n\t\t\t\t;\n\n\t\t\t\t$log.debug( configuration, delay );\n\n\t\t\t\treturn $timeout( () => elem, delay );\n\n\t\t\t};\n\n\t\t\tlet directive = {};\n\t\t\tdirective.restrict = 'A';\n\t\t\tdirective.scope = {\n\t\t\t\taccessToken: \"@dropularAccessToken\",\n\t\t\t\tclientId: \"@dropularClientId\",\n\t\t\t\tdebug: \"@dropularDebug\",\n\t\t\t\tdelay: \"=dropularDelay\",\n\t\t\t};\n\t\t\tdirective.link = link;\n\n\t\t\treturn directive;\n\n\t\t};\n\n\t\tdropularAuthButtonDirective\n\t\t\t.$inject = [\n\t\t\t\t'$log',\n\t\t\t\t'$timeout',\n\t\t\t]\n\t\t;\n\n\n\t\t// Main Module\n\t\tangular\n\t\t\t.module( 'dropular', [] )\n\t\t\t.provider( '$dropularConfig', dropularConfigProvider )\n\t\t\t.factory( 'Dropular', dropularFactory )\n\t\t\t.directive( 'dropularAuthButton', dropularAuthButtonDirective )\n\t\t\t.constant(\n\t\t\t\t'DEFAULT_CONFIGURATION',\n\t\t\t\t{\n\t\t\t\t\taccessToken: '',\n\t\t\t\t\tclientId: undefined,\n\t\t\t\t\tselectUser: undefined,\n\t\t\t\t\tdebug: false,\n\t\t\t\t}\n\t\t\t)\n\t\t;\n\n\t}\n)( angular );\n"]}