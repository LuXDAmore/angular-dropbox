{"version":3,"sources":["angular-dropbox.js"],"names":["angular","dropularConfigProvider","DEFAULT_CONFIGURATION","getConfig","provider","options","$log","error","setConfig","configuration","arguments","length","undefined","tokenProvided","isObject","isUndefined","isDefined","accessToken","isString","clientId","extend","debug","injector","get","this","config","$get","service","dropularFactory","$location","$dropularConfig","upload","init","callback","dropbox","Dropbox","factory","dropularAuthButtonDirective","$timeout","link","scope","elem","delay","directive","restrict","$inject","module","constant","selectUser"],"mappings":"cAaA,SACWA,GAQT,QAASC,GAAwBC,GAkBhC,QAASC,KAER,MAAMC,GAASC,QAKRD,EAASC,SAJfC,EAAKC,MAAO,+BACL,GAYT,QAASC,KAAgC,GAArBC,GAAqBC,UAAAC,OAAA,OAAAC,KAAAF,UAAA,GAAAA,UAAA,MAEpCG,GAAgB,CAIpB,QAAMb,EAAQc,SAAUL,IAAmBT,EAAQe,YAAaN,OAC/DH,GAAKC,MAAO,qCAIbM,EAAgBb,EAAQgB,UAAWP,EAAcQ,cAAiBjB,EAAQkB,SAAUT,EAAcQ,aAC/EjB,EAAQgB,UAAWP,EAAcU,WAAcnB,EAAQkB,SAAUT,EAAcU,WAEtEN,GAK5BT,EAASC,QAAUL,EAAQoB,OAAQf,EAASI,IAEV,KAA3BL,EAASC,QAAQgB,OACvBf,EAAKe,MAAO,wBAAyBjB,EAASC,SAExCD,EAASC,aATfC,GAAKC,MAAO,4EA/Cd,GAAMD,GAAON,EAAQsB,UAAY,OAASC,IAAK,QAG3CnB,EAAWoB,IACfpB,GAASC,WACTD,EAASqB,OAASjB,EAClBJ,EAASI,UAAYA,EACrBJ,EAASD,UAAYA,CAGrB,IAAIE,GAAUH,CAgEd,OAVAE,GAASsB,KAAO,WAEf,GAAIC,KAIJ,OAHAA,GAAQnB,UAAYA,EACpBmB,EAAQxB,UAAYA,EAEbwB,GAIDvB,EAgBR,QAASwB,GACRtB,EACAuB,EACAC,GAGA,QAASC,MAOT,QAASC,KAAqC,GAA/BvB,GAA+BC,UAAAC,OAAA,OAAAC,KAAAF,UAAA,GAAAA,UAAA,MAAXuB,EAAWvB,UAAA,GAEzCL,EAAUyB,EAAgBtB,UAAWC,GACtCyB,MAAAA,EAWH,OARI7B,KACH6B,EAAU,GAAIC,SAAS9B,GAEC,kBAAb4B,IACVA,EAAUC,IAILA,EAIR,GAAIE,KAIJ,OAHAA,GAAQJ,KAAOA,EACfI,EAAQL,OAASA,EAEVK,EAmBR,QAASC,GACR/B,EACAgC,GAGA,QAASC,GAAMC,EAAOC,GAErB,GAAIC,GAAQF,EAAME,MAAQF,EAAME,MAAQ,EACrCjC,GACDQ,YAAauB,EAAMvB,YAAcuB,EAAMvB,YAAc,GACrDE,SAAUqB,EAAMrB,SAAUqB,EAAMrB,SAAW,GAC3CE,QAAOmB,EAAMnB,OAAQmB,EAAMnB,MAM7B,OAFAf,GAAKe,MAAOZ,EAAeiC,GAEpBJ,EAAU,WAAA,MAAMG,IAAMC,GAI9B,GAAIC,KAUJ,OATAA,GAAUC,SAAW,IACrBD,EAAUH,OACTvB,YAAa,uBACbE,SAAU,oBACVE,MAAO,iBACPqB,MAAO,kBAERC,EAAUJ,KAAOA,EAEVI,EAjGR1C,EACE4C,SACA,yBAiDFjB,EACEiB,SACA,OACA,YACA,mBA8CFR,EACEQ,SACA,OACA,YAMF7C,EACE8C,OAAQ,eACR1C,SAAU,kBAAmBH,GAC7BmC,QAAS,WAAYR,GACrBe,UAAW,qBAAsBN,GACjCU,SACA,yBAEC9B,YAAa,GACbE,aAAUP,GACVoC,eAAYpC,GACZS,OAAO,KAMTrB","file":"angular-dropbox.min.js","sourcesContent":["/*\n*  Dropbox Wrapper for AngularJs @dropular\n*  API @ http://angular-dropbox.github.io/\n*\n*  Dropular is a service that permit to comunicate with the new Dropbox API.\n* Manteined by @studiomado @luxdamore\n*\n* Dropbox links\n* \t- App creation: https://www.dropbox.com/developers/apps/create\n*\t- Api explorer: https://dropbox.github.io/dropbox-api-v2-explorer/\n*\n*/\n\n(\n\tfunction( angular ) {\n\t\t'use strict';\n\n\t\t/**\n\t\t* @function dropularConfigProvider\n\t\t* @param  {angularProvider} $logProvider { Only used for debugging purpose }\n\t\t* @return {object} { Provider && Services Configurator }\n\t\t*/\n\t\tfunction dropularConfigProvider( DEFAULT_CONFIGURATION ) {\n\n\t\t\tconst $log = angular.injector( [ 'ng' ] ).get( '$log' );\n\n\t\t\t// Provider\n\t\t\tlet provider = this;\n\t\t\tprovider.options = {};\n\t\t\tprovider.config = setConfig;\n\t\t\tprovider.setConfig = setConfig;\n\t\t\tprovider.getConfig = getConfig;\n\n\t\t\t// Default options\n\t\t\tlet options = DEFAULT_CONFIGURATION;\n\n\t\t\t/**\n\t\t\t* @function getConfig\n\t\t\t* @return {object} { Actual configuration }\n\t\t\t*/\n\t\t\tfunction getConfig() {\n\n\t\t\t\tif( ! provider.options ) {\n\t\t\t\t\t$log.error( 'No configuration provided.' );\n\t\t\t\t\treturn false;\n\t\t\t\t};\n\n\t\t\t\treturn provider.options;\n\n\t\t\t};\n\n\t\t\t/**\n\t\t\t* @function setConfig\n\t\t\t* @param {object} configuration { the configuration for your droprox API }\n\t\t\t* @return {bool} { if everything goes fine }\n\t\t\t*/\n\t\t\tfunction setConfig( configuration = {} ) {\n\n\t\t\t\tlet tokenProvided = true\n\t\t\t\t\t, clientIdProvided = true\n\t\t\t\t;\n\n\t\t\t\tif( ! angular.isObject( configuration ) || angular.isUndefined( configuration ) ) {\n\t\t\t\t\t$log.error( 'Configuration must be an object.' );\n\t\t\t\t\treturn;\n\t\t\t\t};\n\n\t\t\t\ttokenProvided = angular.isDefined( configuration.accessToken ) && angular.isString( configuration.accessToken );\n\t\t\t\tclientIdProvided = angular.isDefined( configuration.clientId ) && angular.isString( configuration.clientId );\n\n\t\t\t\tif( ! clientIdProvided && ! tokenProvided ) {\n\t\t\t\t\t$log.error( 'accessToken or clienId must be provided and must be a non-empty string.' );\n\t\t\t\t\treturn;\n\t\t\t\t};\n\n\t\t\t\tprovider.options = angular.extend( options, configuration );\n\n\t\t\t\tif( !! provider.options.debug === true )\n\t\t\t\t\t$log.debug( 'Configuration changed', provider.options );\n\n\t\t\t\treturn provider.options;\n\n\t\t\t};\n\n\t\t\t/**\n\t\t\t* @function $get\n\t\t\t* @return {angularServices} { The services for this provider }\n\t\t\t*/\n\t\t\tprovider.$get = () => {\n\n\t\t\t\tlet service = {};\n\t\t\t\tservice.setConfig = setConfig;\n\t\t\t\tservice.getConfig = getConfig;\n\n\t\t\t\treturn service;\n\n\t\t\t};\n\n\t\t\treturn provider;\n\n\t\t};\n\n\t\tdropularConfigProvider\n\t\t\t.$inject = [\n\t\t\t\t'DEFAULT_CONFIGURATION',\n\t\t\t]\n\t\t;\n\n\n\t\t/**\n\t\t* @function dropularFactory\n\t\t* @param  {angularProvider} $log { Only used for debugging purpose }\n\t\t* @return {angularFactory} { Factory }\n\t\t*/\n\t\tfunction dropularFactory(\n\t\t\t$log,\n\t\t\t$location,\n\t\t\t$dropularConfig\n\t\t) {\n\n\t\t\tfunction upload() {};\n\n\t\t\t/**\n\t\t\t* @function init\n\t\t\t* @param  {type} configuration = {} { Create new Dropbox instance }\n\t\t\t* @return {type} { Dropbox instance }\n\t\t\t*/\n\t\t\tfunction init( configuration = {}, callback ) {\n\n\t\t\t\tlet options = $dropularConfig.setConfig( configuration )\n\t\t\t\t\t, dropbox\n\t\t\t\t;\n\n\t\t\t\tif( options ) {\n\t\t\t\t\tdropbox = new Dropbox( options );\n\n\t\t\t\t\tif( typeof callback === 'function' )\n\t\t\t\t\t\tcallback( dropbox );\n\n\t\t\t\t};\n\n\t\t\t\treturn dropbox;\n\n\t\t\t};\n\n\t\t\tlet factory = {};\n\t\t\tfactory.init = init;\n\t\t\tfactory.upload = upload;\n\n\t\t\treturn factory;\n\n\t\t};\n\n\t\tdropularFactory\n\t\t\t.$inject = [\n\t\t\t\t'$log',\n\t\t\t\t'$location',\n\t\t\t\t'$dropularConfig'\n\t\t\t]\n\t\t;\n\n\n\t\t/**\n\t\t* @function dropularAuthButtonDirective\n\t\t* @param  {angularProvider} $log { Only used for debugging purpose }\n\t\t* @param  {angularProvider} $timeout { Used for Delayed statup }\n\t\t* @return {angularDirective} { Directive }\n\t\t*/\n\t\tfunction dropularAuthButtonDirective(\n\t\t\t$log,\n\t\t\t$timeout\n\t\t) {\n\n\t\t\tfunction link( scope, elem ) {\n\n\t\t\t\tlet delay = scope.delay ? scope.delay : 0\n\t\t\t\t\t, configuration = {\n\t\t\t\t\t\taccessToken: scope.accessToken ? scope.accessToken : '',\n\t\t\t\t\t\tclientId: scope.clientId ?scope.clientId : '',\n\t\t\t\t\t\tdebug: scope.debug ? scope.debug : false,\n\t\t\t\t\t}\n\t\t\t\t;\n\n\t\t\t\t$log.debug( configuration, delay );\n\n\t\t\t\treturn $timeout( () => elem, delay );\n\n\t\t\t};\n\n\t\t\tlet directive = {};\n\t\t\tdirective.restrict = 'A';\n\t\t\tdirective.scope = {\n\t\t\t\taccessToken: \"@dropularAccessToken\",\n\t\t\t\tclientId: \"@dropularClientId\",\n\t\t\t\tdebug: \"@dropularDebug\",\n\t\t\t\tdelay: \"=dropularDelay\",\n\t\t\t};\n\t\t\tdirective.link = link;\n\n\t\t\treturn directive;\n\n\t\t};\n\n\t\tdropularAuthButtonDirective\n\t\t\t.$inject = [\n\t\t\t\t'$log',\n\t\t\t\t'$timeout',\n\t\t\t]\n\t\t;\n\n\n\t\t// Main Module\n\t\tangular\n\t\t\t.module( 'dropular', [] )\n\t\t\t.provider( '$dropularConfig', dropularConfigProvider )\n\t\t\t.factory( 'Dropular', dropularFactory )\n\t\t\t.directive( 'dropularAuthButton', dropularAuthButtonDirective )\n\t\t\t.constant(\n\t\t\t\t'DEFAULT_CONFIGURATION',\n\t\t\t\t{\n\t\t\t\t\taccessToken: '',\n\t\t\t\t\tclientId: undefined,\n\t\t\t\t\tselectUser: undefined,\n\t\t\t\t\tdebug: false,\n\t\t\t\t}\n\t\t\t)\n\t\t;\n\n\t}\n)( angular );\n"]}